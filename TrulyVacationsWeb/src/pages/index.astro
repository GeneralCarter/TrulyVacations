---
import strapi from "../lib/strapi";
import Layout from "../layouts/Layout.astro";
import PropertyCard from "../components/PropertyCard.astro";
import VideoHero from "../components/VideoHero.astro";
import LocationGrid from "../components/LocationGrid.astro";
import { ownerRez } from "../lib/ownerRez";

const posts = await strapi.collection("posts").find();
const locations = await strapi.collection("locations").find();
const listingsResponse = await ownerRez.getListings(true);
const listings = listingsResponse.items;
---

<Layout>
	<main>
		<VideoHero />

		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
			<h2 class="text-4xl font-bold text-gray-900 mb-8 text-center">
				Featured Properties
			</h2>
			<div class="flex flex-col gap-2">
				{listings.map((listing) => <PropertyCard listing={listing} />)}
			</div>
		</div>
		<LocationGrid locations={locations.data} />
	</main>
</Layout>
